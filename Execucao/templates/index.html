<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoramento de Alagamento</title>
    <meta name="description" content="Front End para nosso sistema de Monitoramento de Alagamentos/Enchentes">
    <meta name="author" content="Paulo Cruz">

    <!-- CSS externo -->
    <link rel="stylesheet" href="{{ url_for ('static', filename ='style.css' )}}">
    <!-- Socket.IO -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>


</head>
<body>
    <h1>Sistema de Monitoramento de Alagamentos/Enchentes</h1>

    <div class="container">
        <nav>
            <ul>
                <li>
                    <a href="/projeto">Sobre Projeto</a>
                </li>
                <li>
                    <a href="/index">Monitoramento</a>
                </li>
                <li>
                    <a href="/grupo">Sobre Grupo</a>
                </li>
            </ul>
        </nav>

        <header>
            <div class="imagem-header">
                <!-- âœ… VÃ­deo carregado corretamente -->
                <video width="400" autoplay loop muted playsinline controls>
                    <source src="{{ url_for('static', filename='video/Enchente.mp4') }}" type="video/mp4">
                    Seu navegador nÃ£o suporta vÃ­deos em HTML5.
                </video>
            </div>
        </header>
    </div>

    <!-- âœ… Pop-up de alerta -->
    <div id="popup" class="popup">
        ðŸš¨ Alerta de alagamento ou enchente na regiÃ£o!
        <br><br>
        <button onclick="fecharPopup()">Cancelar</button>
    </div>

    <script>
        const popup = document.getElementById("popup");

        function mostrarPopup(mensagem) {
            popup.innerHTML = mensagem + '<br><br><button onclick="fecharPopup()">Cancelar</button>';
            popup.classList.add("show");
        }

        function fecharPopup() {
            popup.classList.remove("show");
        }

        // ðŸ”¹ Conecta ao backend Flask-SocketIO
        const socket = io();

        socket.on("connect", () => {
            console.log("âœ… Conectado ao servidor Socket.IO");
        });

        // ðŸ”¹ Recebe mensagens do servidor
        socket.on("alerta", (data) => {
            console.log("ðŸš¨ Alerta recebido:", data.mensagem);
            mostrarPopup(data.mensagem);
        });
    </script>
</body>
</html>
